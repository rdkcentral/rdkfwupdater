Starting device_status_helper App ===================>
[==========] Running 62 tests from 13 test suites.
[----------] Global test environment set-up.
[----------] 25 tests from CreateJsonTestFixture
SetUpTestCase
[ RUN      ] CreateJsonTestFixture.TestName_checkPDRIUpgrade_Null
SetUp
checkPDRIUpgrade: parameter is NULL
TearDown
[       OK ] CreateJsonTestFixture.TestName_checkPDRIUpgrade_Null (1 ms)
[ RUN      ] CreateJsonTestFixture.TestName_checkPDRIUpgrade_notrq
SetUp
Inside Mock Function getDevicePropertyData
isPDRIEnable: pdri status from device.property file=true
Inside Mock Function GetPDRIFileName
current pdri image = Test_pdri.bin
After Removing .bin = Test_pdri
current pdri image = Test_pdri and requested image = Test_pdri.bin
current pdri image = Test_pdri and requested dwnl pdri image = Test_pdri.bin
PDRI version of the active image and the image to be upgraded are the same. No upgrade required.
TearDown
[       OK ] CreateJsonTestFixture.TestName_checkPDRIUpgrade_notrq (1 ms)
[ RUN      ] CreateJsonTestFixture.TestName_checkPDRIUpgrade_rq
SetUp
Inside Mock Function getDevicePropertyData
isPDRIEnable: pdri status from device.property file=true
Inside Mock Function GetPDRIFileName
current pdri image = Test_pdri.bin
After Removing .bin = Test_pdri
current pdri image = Test_pdri and requested image = Test_false_pdri.bin
TearDown
[       OK ] CreateJsonTestFixture.TestName_checkPDRIUpgrade_rq (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_GetPDRIVersion_NullCheck
SetUp
TearDown
[       OK ] CreateJsonTestFixture.TestName_GetPDRIVersion_NullCheck (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_GetPDRIVersion
SetUp
Inside Mock Function getDevicePropertyData
isPDRIEnable: pdri status from device.property file=true
Inside Mock Function GetPDRIFileName
current pdri image = Test_pdri.bin
After Removing .bin = Test_pdri
TearDown
[       OK ] CreateJsonTestFixture.TestName_GetPDRIVersion (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isPDRIEnable
SetUp
Inside Mock Function getDevicePropertyData
isPDRIEnable: pdri status from device.property file=true
TearDown
[       OK ] CreateJsonTestFixture.TestName_isPDRIEnable (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_CheckIProuteConnectivity_NullCheck
SetUp
parameter is NULL
TearDown
[       OK ] CreateJsonTestFixture.TestName_CheckIProuteConnectivity_NullCheck (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_CheckIProuteConnectivity_success
SetUp
CheckIPRoute Waiting for Route Config /tmp/route_available file
Inside Mock Function filePresentCheck
CheckIPRoute Received Route Config file
ip route file:TEST.txt not present
Inside Mock Function isConnectedToInternet
Device is online
TearDown
[       OK ] CreateJsonTestFixture.TestName_CheckIProuteConnectivity_success (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_CheckIProuteConnectivity_offline
SetUp
CheckIPRoute Waiting for Route Config /tmp/route_available file
Inside Mock Function filePresentCheck
CheckIPRoute Received Route Config file
ip route file:TEST.txt not present
Inside Mock Function isConnectedToInternet
Device is not online
TearDown
[       OK ] CreateJsonTestFixture.TestName_CheckIProuteConnectivity_offline (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_CheckIProuteConnectivity_fail
SetUp
CheckIPRoute Waiting for Route Config /tmp/route_available file
Inside Mock Function filePresentCheck
Inside Mock Function filePresentCheck
Inside Mock Function filePresentCheck
Inside Mock Function filePresentCheck
Inside Mock Function filePresentCheck
CheckIPRoute Received Route Config file
ip route file:TEST.txt not present
Inside Mock Function isConnectedToInternet
Device is not online
TearDown
[       OK ] CreateJsonTestFixture.TestName_CheckIProuteConnectivity_fail (75001 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isDelayFWDownloadActive_no
SetUp
isDelayFWDownloadActive: Device configured with download delay of 1 minutes.
TearDown
[       OK ] CreateJsonTestFixture.TestName_isDelayFWDownloadActive_no (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_checkCodebigAccess_Success
SetUp
Inside Mock Function v_secure_system
Exit code for codebigcheck:0
CodebigAccess Present:0
TearDown
[       OK ] CreateJsonTestFixture.TestName_checkCodebigAccess_Success (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_checkCodebigAccess_Fail
SetUp
Inside Mock Function v_secure_system
Exit code for codebigcheck:1
CodebigAccess Not Present:1
TearDown
[       OK ] CreateJsonTestFixture.TestName_checkCodebigAccess_Fail (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isStateRedSupported_Success
SetUp
Inside Mock Function filePresentCheck
isStateRedSupported(): Yes file present:/tmp/stateSupport
TearDown
[       OK ] CreateJsonTestFixture.TestName_isStateRedSupported_Success (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isStateRedSupported_Fail
SetUp
Inside Mock Function filePresentCheck
isStateRedSupported(): No:/tmp/stateSupport
TearDown
[       OK ] CreateJsonTestFixture.TestName_isStateRedSupported_Fail (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isInStateRed_Sucess
SetUp
Inside Mock Function filePresentCheck
isStateRedSupported(): Yes file present:/tmp/stateSupport
Inside Mock Function filePresentCheck
isInStateRed(): Yes Flag prsent:/tmp/stateRedEnabled. Device is in statered
TearDown
[       OK ] CreateJsonTestFixture.TestName_isInStateRed_Sucess (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isInStateRed_Fail
SetUp
Inside Mock Function filePresentCheck
isStateRedSupported(): No:/tmp/stateSupport
isInStateRed(): No ret:0
TearDown
[       OK ] CreateJsonTestFixture.TestName_isInStateRed_Fail (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isOCSPEnable_Sucess
SetUp
Inside Mock Function filePresentCheck
Inside Mock Function filePresentCheck
isOCSPEnable() : ocsp status=1
TearDown
[       OK ] CreateJsonTestFixture.TestName_isOCSPEnable_Sucess (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isOCSPEnable_Fail
SetUp
Inside Mock Function filePresentCheck
Inside Mock Function filePresentCheck
isOCSPEnable() : ocsp status=0
TearDown
[       OK ] CreateJsonTestFixture.TestName_isOCSPEnable_Fail (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isUpgradeInProgress_Sucess
SetUp
Inside Mock Function filePresentCheck
TearDown
[       OK ] CreateJsonTestFixture.TestName_isUpgradeInProgress_Sucess (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_isUpgradeInProgress_Fail
SetUp
Inside Mock Function filePresentCheck
Inside Mock Function filePresentCheck
Inside Mock Function filePresentCheck
TearDown
[       OK ] CreateJsonTestFixture.TestName_isUpgradeInProgress_Fail (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_unsetStateRed
SetUp
Inside Mock Function filePresentCheck
RED:unsetStateRed: Not in State Red
TearDown
[       OK ] CreateJsonTestFixture.TestName_unsetStateRed (0 ms)
[ RUN      ] CreateJsonTestFixture.TestName_checkAndEnterStateRed_Check
SetUp
Inside Mock Function filePresentCheck
isStateRedSupported(): Yes file present:/tmp/stateSupport
Inside Mock Function filePresentCheck
isStateRedSupported(): Yes file present:/tmp/stateSupport
Inside Mock Function filePresentCheck
isInStateRed(): Yes Flag prsent:/tmp/stateRedEnabled. Device is in statered
RED checkAndEnterStateRed: device state red recovery flag already set
Inside Mock Function t2CountNotify

GMOCK WARNING:
Uninteresting mock function call - returning directly.
    Function call: t2CountNotify(0x5fb85f9aabd6 pointing to "SYST_INFO_RedstateSet")
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by blindly adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/master/docs/gmock_cook_book.md#knowing-when-to-expect for details.
TearDown
[       OK ] CreateJsonTestFixture.TestName_checkAndEnterStateRed_Check (13 ms)
[ RUN      ] CreateJsonTestFixture.TestName_checkAndEnterStateRed_instatered
SetUp
Inside Mock Function filePresentCheck
isStateRedSupported(): Yes file present:/tmp/stateSupport
Inside Mock Function filePresentCheck
isStateRedSupported(): Yes file present:/tmp/stateSupport
Inside Mock Function filePresentCheck
isInStateRed(): Yes Flag prsent:/tmp/stateRedEnabled. Device is in statered
RED checkAndEnterStateRed: device state red recovery flag already set
Inside Mock Function t2CountNotify

GMOCK WARNING:
Uninteresting mock function call - returning directly.
    Function call: t2CountNotify(0x5fb85f9aabd6 pointing to "SYST_INFO_RedstateSet")
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by blindly adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/master/docs/gmock_cook_book.md#knowing-when-to-expect for details.
TearDown
[       OK ] CreateJsonTestFixture.TestName_checkAndEnterStateRed_instatered (17 ms)
[ RUN      ] CreateJsonTestFixture.TestName_checkAndEnterStateRed_notinstatered
SetUp
Inside Mock Function filePresentCheck
isStateRedSupported(): Yes file present:/tmp/stateSupport
Inside Mock Function filePresentCheck
isStateRedSupported(): Yes file present:/tmp/stateSupport
Inside Mock Function filePresentCheck
isInStateRed(): Yes Flag prsent:/tmp/stateRedEnabled. Device is in statered
RED checkAndEnterStateRed: device state red recovery flag already set
Inside Mock Function t2CountNotify

GMOCK WARNING:
Uninteresting mock function call - returning directly.
    Function call: t2CountNotify(0x5fb85f9aabd6 pointing to "SYST_INFO_RedstateSet")
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by blindly adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/master/docs/gmock_cook_book.md#knowing-when-to-expect for details.
TearDown
[       OK ] CreateJsonTestFixture.TestName_checkAndEnterStateRed_notinstatered (21 ms)
TearDownTestCase
[----------] 25 tests from CreateJsonTestFixture (75314 ms total)

[----------] 5 tests from TestCurrentRunningInst
[ RUN      ] TestCurrentRunningInst.TestName_NULLCheck
CurrentRunningInst(): Function parameter is NULL
[       OK ] TestCurrentRunningInst.TestName_NULLCheck (0 ms)
[ RUN      ] TestCurrentRunningInst.TestName_FilePresent
procfile=/tmp/cmdline.txt
proc entry process name:rdkvfwupgrader 0 1

proc entry cmdline and process name matched.
Device initiated CDL is in progress..
Exiting without triggering device initiated firmware download.
t2CountNotify  g_DeviceStatusMock object is NULL
[       OK ] TestCurrentRunningInst.TestName_FilePresent (8 ms)
[ RUN      ] TestCurrentRunningInst.TestName_FilePresent_DaemonBinary
procfile=/tmp/cmdline.txt
proc entry process name:rdkFwupdateMgr 0 1

proc entry cmdline and process name matched.
Device initiated CDL is in progress..
Exiting without triggering device initiated firmware download.
t2CountNotify  g_DeviceStatusMock object is NULL
[       OK ] TestCurrentRunningInst.TestName_FilePresent_DaemonBinary (10 ms)
[ RUN      ] TestCurrentRunningInst.TestName_FilePresentWrongData
procfile=/tmp/cmdline.txt
proc entry process name:xyz 0 1

[       OK ] TestCurrentRunningInst.TestName_FilePresentWrongData (2 ms)
[ RUN      ] TestCurrentRunningInst.TestName_FileNotPresent
CurrentRunningInst():Unable to open the file:/tmp/runInst.txt
[       OK ] TestCurrentRunningInst.TestName_FileNotPresent (7 ms)
[----------] 5 tests from TestCurrentRunningInst (50 ms total)

[----------] 4 tests from TestisDnsResolve
[ RUN      ] TestisDnsResolve.TestName_NULLCheck
isDnsResolve(): parameter is NULL
[       OK ] TestisDnsResolve.TestName_NULLCheck (0 ms)
[ RUN      ] TestisDnsResolve.TestName_FilePresent
dns resolve data=nameserver:2345:34:56

dns nameserver present.
[       OK ] TestisDnsResolve.TestName_FilePresent (11 ms)
[ RUN      ] TestisDnsResolve.TestName_FilePresentWithInfo
[       OK ] TestisDnsResolve.TestName_FilePresentWithInfo (3 ms)
[ RUN      ] TestisDnsResolve.TestName_FileNotPresent
dns resolve file:/tmp/dnsResolv.txt not present
[       OK ] TestisDnsResolve.TestName_FileNotPresent (4 ms)
[----------] 4 tests from TestisDnsResolve (60 ms total)

[----------] 3 tests from TestlastDwnlImg
[ RUN      ] TestlastDwnlImg.TestName_BigBuffer
lastDwnlImg: Input buffer size is greater than 64
[       OK ] TestlastDwnlImg.TestName_BigBuffer (0 ms)
[ RUN      ] TestlastDwnlImg.TestName_Success
lastDnldFile tbuff: TestLastImage.bin

lastDnldFile: TestLastImage.bin
Image name return to caller function: TestLastImage.b
[       OK ] TestlastDwnlImg.TestName_Success (6 ms)
[ RUN      ] TestlastDwnlImg.TestName_Success1
Optimize lastDnldFile: TestLastImage.b
[       OK ] TestlastDwnlImg.TestName_Success1 (0 ms)
[----------] 3 tests from TestlastDwnlImg (14 ms total)

[----------] 3 tests from TestcurrentImg
[ RUN      ] TestcurrentImg.TestName_BigBuffer
currentImg: Input buffer size is greater than 64
[       OK ] TestcurrentImg.TestName_BigBuffer (0 ms)
[ RUN      ] TestcurrentImg.TestName_Success
currentImg tbuff: TestImage.bin

currentImg: TestImage.bin
currentImg: TestImage.bin
[       OK ] TestcurrentImg.TestName_Success (22 ms)
[ RUN      ] TestcurrentImg.TestName_Success1
Optimize currentImg: TestImage.bin
[       OK ] TestcurrentImg.TestName_Success1 (0 ms)
[----------] 3 tests from TestcurrentImg (37 ms total)

[----------] 3 tests from TestprevFlashedFile
[ RUN      ] TestprevFlashedFile.TestName_BigBuffer
prevFlashedFile: Input buffer size is greater than 64
[       OK ] TestprevFlashedFile.TestName_BigBuffer (0 ms)
[ RUN      ] TestprevFlashedFile.TestName_Success
prevImg tbuff: TestPrevImage.bin

prevImg: TestPrevImage.b
[       OK ] TestprevFlashedFile.TestName_Success (15 ms)
[ RUN      ] TestprevFlashedFile.TestName_Success1
Optimize prevImg: TestPrevImage.b
[       OK ] TestprevFlashedFile.TestName_Success1 (0 ms)
[----------] 3 tests from TestprevFlashedFile (23 ms total)

[----------] 4 tests from TestcheckForValidPCIUpgrade
[ RUN      ] TestcheckForValidPCIUpgrade.TestName_checkForValidPCIUpgrade_NullCheck
checkForValidPCIUpgrade: Parameter is NULL
[       OK ] TestcheckForValidPCIUpgrade.TestName_checkForValidPCIUpgrade_NullCheck (0 ms)
[ RUN      ] TestcheckForValidPCIUpgrade.TestName_checkForValidPCIUpgrade_failpdri
Xconf image/PDRI configuration Check
PDRI image is wrongly configured as Cloud Firmware Value
[       OK ] TestcheckForValidPCIUpgrade.TestName_checkForValidPCIUpgrade_failpdri (0 ms)
[ RUN      ] TestcheckForValidPCIUpgrade.TestName_checkForValidPCIUpgrade_Success
Xconf image/PDRI configuration Check
Trigger Type=1
Optimize lastDnldFile: TestLastImage.bin
Optimize currentImg: TestImage.bin
last_dwnl_status=1 and current_img_status=1
myfwversion:pciimage.bin
cloudFWVersion:pciimage.bin
cloudFWFile:pciimage.bin
t2ValNotify  g_DeviceStatusMock object is NULL
lastdwnlfile:TestLastImage.bin
currentImg:TestImage.bin
pci file check true
[       OK ] TestcheckForValidPCIUpgrade.TestName_checkForValidPCIUpgrade_Success (0 ms)
[ RUN      ] TestcheckForValidPCIUpgrade.TestName_checkForValidPCIUpgrade_Success1
Xconf image/PDRI configuration Check
Trigger Type=1
Optimize lastDnldFile: TestLastImage.bin
Optimize currentImg: TestImage.bin
last_dwnl_status=1 and current_img_status=1
myfwversion:TestImage.bin
cloudFWVersion:TestImage.bin
cloudFWFile:TestImage.bin
t2ValNotify  g_DeviceStatusMock object is NULL
lastdwnlfile:TestLastImage.bin
currentImg:TestImage.bin
FW version of the active image and the image to be upgraded are the same. No upgrade required.
t2CountNotify  g_DeviceStatusMock object is NULL
eventManager  g_DeviceStatusMock object is NULL
updateUpgradeFlag  g_DeviceStatusMock object is NULL
updateFWDownloadStatus(): Going to write:/opt/fwdnldstatus.txt
[       OK ] TestcheckForValidPCIUpgrade.TestName_checkForValidPCIUpgrade_Success1 (59 ms)
[----------] 4 tests from TestcheckForValidPCIUpgrade (93 ms total)

[----------] 3 tests from TestupdateOPTOUTFile
[ RUN      ] TestupdateOPTOUTFile.TestName_NullCheck
updateOPTOUTFile: parameter is NULL
[       OK ] TestupdateOPTOUTFile.TestName_NullCheck (0 ms)
[ RUN      ] TestupdateOPTOUTFile.TestName_Success
optout set to:softwareoptout=ENFORCE_OPTOUT

rename optout file to /tmp/maintenance_mgr_record.conf
[       OK ] TestupdateOPTOUTFile.TestName_Success (48 ms)
[ RUN      ] TestupdateOPTOUTFile.TestName_Fail
[       OK ] TestupdateOPTOUTFile.TestName_Fail (5 ms)
[----------] 3 tests from TestupdateOPTOUTFile (82 ms total)

[----------] 1 test from TestcheckVideoStatus
[ RUN      ] TestcheckVideoStatus.TestName_NullCheck
checkVideoStatus() parameter is NULL
[       OK ] TestcheckVideoStatus.TestName_NullCheck (0 ms)
[----------] 1 test from TestcheckVideoStatus (12 ms total)

[----------] 2 tests from TestisThrottleEnabled
[ RUN      ] TestisThrottleEnabled.TestName_NullCheck
isThrottleEnabled: Parameter is NULL
[       OK ] TestisThrottleEnabled.TestName_NullCheck (0 ms)
[ RUN      ] TestisThrottleEnabled.TestName_success
isThrottleEnabled(): DeviceType=PLATCO RebootImmediateFlag=false
checkVideoStatus() device name=PLATCO and checking file=/sys/class/vdec/vdec_status
checkVideoStatus() unable to open file=/sys/class/vdec/vdec_status
Video is not playing. Throttle mode is not enable
[       OK ] TestisThrottleEnabled.TestName_success (0 ms)
[----------] 2 tests from TestisThrottleEnabled (13 ms total)

[----------] 1 test from TestgetFileLastModifyTime
[ RUN      ] TestgetFileLastModifyTime.TestName_NullCheck
getFileLastModifyTime : Parameter is NULL
[       OK ] TestgetFileLastModifyTime.TestName_NullCheck (0 ms)
[----------] 1 test from TestgetFileLastModifyTime (6 ms total)

[----------] 4 tests from TestisDwnlBlock
[ RUN      ] TestisDwnlBlock.TestName_direct_not_block
 isDwnlBlock : Checking for direct
getFileLastModifyTime: File: /tmp/.lastdirectfail_cdl not present: -1
[       OK ] TestisDwnlBlock.TestName_direct_not_block (4 ms)
[ RUN      ] TestisDwnlBlock.TestName_direct_block
 isDwnlBlock : Checking for direct
getFileLastModifyTime : Last mod time: 1766903112
getCurrentSysTimeSec : current system time=1766903112
direct modtime=0
direct remtime=1440
ImageUpgrade: Last direct failed blocking is still valid for 1440 mins, preventing direct
[       OK ] TestisDwnlBlock.TestName_direct_block (10 ms)
[ RUN      ] TestisDwnlBlock.TestName_codebig_not_block
 isDwnlBlock : Checking for codebig
getFileLastModifyTime: File: /tmp/.lastcodebigfail_cdl not present: -1
[       OK ] TestisDwnlBlock.TestName_codebig_not_block (0 ms)
[ RUN      ] TestisDwnlBlock.TestName_codebig_block
 isDwnlBlock : Checking for codebig
getFileLastModifyTime : Last mod time: 1766903112
getCurrentSysTimeSec : current system time=1766903112
codebig modtime=0
codebig remtime=30
ImageUpgrade: Last codebig failed blocking is still valid for 30 mins, preventing direct
[       OK ] TestisDwnlBlock.TestName_codebig_block (10 ms)
[----------] 4 tests from TestisDwnlBlock (40 ms total)

[----------] 4 tests from TestDwnlStatus
[ RUN      ] TestDwnlStatus.TestName_updateFWDownloadStatusNull
updateFWDownloadStatus(): Parameter is NULL
[       OK ] TestDwnlStatus.TestName_updateFWDownloadStatusNull (0 ms)
[ RUN      ] TestDwnlStatus.TestName_updateFWDownloadStatus
updateFWDownloadStatus(): Going to write:/opt/fwdnldstatus.txt
[       OK ] TestDwnlStatus.TestName_updateFWDownloadStatus (0 ms)
[ RUN      ] TestDwnlStatus.TestName_updateFWDownloadStatustrue
updateFWDownloadStatus(): Going to write:/opt/fwdnldstatus.txt
[       OK ] TestDwnlStatus.TestName_updateFWDownloadStatustrue (0 ms)
[ RUN      ] TestDwnlStatus.TestName_notifyDwnlStatusNull
notifyDwnlStatus: Parameter is NULL
[       OK ] TestDwnlStatus.TestName_notifyDwnlStatusNull (0 ms)
[----------] 4 tests from TestDwnlStatus (5 ms total)

[----------] Global test environment tear-down
[==========] 62 tests from 13 test suites ran. (75840 ms total)
[  PASSED  ] 62 tests.
